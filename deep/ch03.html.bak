<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·±å…¥äº†è§£ - æ¨¡å‹è®­ç»ƒ</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header class="top-header">
        <div class="logo">
            <span class="logo-icon">ğŸ¤–</span>
            <span class="logo-text">ç”Ÿæˆå¼AIå…¥é—¨è¯¾ç¨‹</span>
        </div>
    </header>

    <main class="deep-page">
        <div class="deep-header">
            <a href="../index.html#ch03" class="back-btn">
                <span>â†</span>
                <span>è¿”å›è¯¾ç¨‹é¦–é¡µ</span>
            </a>
        </div>

        <h1 class="deep-title">æ·±å…¥äº†è§£ï¼šæ¨¡å‹è®­ç»ƒ</h1>

        <div class="deep-content">
            <h2>è®­ç»ƒé˜¶æ®µæ’åºæ¸¸æˆ</h2>
            <p>æ‹–æ‹½æˆ–ç‚¹å‡»æ¥æ’åˆ—å¤§æ¨¡å‹è®­ç»ƒçš„æ­£ç¡®é¡ºåºï¼š</p>

            <div id="sortingGame" style="margin: 30px 0;">
                <div id="phasesContainer" style="display: flex; gap: 15px; flex-wrap: wrap; min-height: 150px; padding: 20px; background: var(--bg-tertiary); border-radius: 10px; margin-bottom: 20px;">
                </div>
                <div id="sortedPhases" style="display: flex; gap: 15px; flex-wrap: wrap; min-height: 150px; padding: 20px; background: white; border: 2px dashed var(--border-color); border-radius: 10px;">
                </div>
                <button id="checkOrderBtn" class="btn-generate" style="margin-top: 20px;">æ£€æŸ¥é¡ºåº</button>
                <div id="orderFeedback" class="prompt-preview" style="display: none; margin-top: 15px;"></div>
            </div>

            <h2>ä¸‰ç§è®­ç»ƒæ–¹å¼å¯¹æ¯”</h2>

            <table style="width:100%; border-collapse: collapse; margin: 20px 0;">
                <tr style="background: var(--bg-tertiary);">
                    <th style="padding: 12px; border: 1px solid var(--border-color);">ç‰¹å¾</th>
                    <th style="padding: 12px; border: 1px solid var(--border-color);">é¢„è®­ç»ƒ</th>
                    <th style="padding: 12px; border: 1px solid var(--border-color);">å¾®è°ƒ</th>
                    <th style="padding: 12px; border: 1px solid var(--border-color);">å¼ºåŒ–å­¦ä¹ </th>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æ•°æ®é‡</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æµ·é‡ï¼ˆTBçº§ï¼‰</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">è¾ƒå°‘ï¼ˆç²¾é€‰ï¼‰</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">ä¸­ç­‰ï¼ˆåå¥½æ•°æ®ï¼‰</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æ•°æ®ç±»å‹</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">äº’è”ç½‘æ–‡æœ¬</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">é—®ç­”å¯¹ã€ä»»åŠ¡æ•°æ®</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">äººç±»åå¥½æ’åº</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">å­¦ä¹ æ–¹å¼</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">è‡ªç›‘ç£å­¦ä¹ </td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">ç›‘ç£å­¦ä¹ </td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">å¼ºåŒ–å­¦ä¹ </td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">ç›®æ ‡</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">å­¦ä¹ åŸºç¡€çŸ¥è¯†</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æŒæ¡ä¸“ä¸šèƒ½åŠ›</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">å¯¹é½äººç±»ä»·å€¼è§‚</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æ¯”å–»</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">é€šè¯†æ•™è‚²</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">ä¸“ä¸šåŸ¹è®­</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">èŒä¸šé“å¾·</td>
                </tr>
            </table>

            <h2>RLHFå·¥ä½œæµç¨‹</h2>

            <div style="background: var(--bg-tertiary); padding: 25px; border-radius: 10px; margin: 20px 0;">
                <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                    <div style="background: white; padding: 20px; border-radius: 8px; text-align: center; min-width: 150px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ“</div>
                        <div><strong>1. æ”¶é›†æç¤º</strong></div>
                        <div style="font-size: 0.85rem; color: var(--text-light);">ç”¨æˆ·ç¼–å†™æç¤º</div>
                    </div>
                    <div style="font-size: 1.5rem; color: var(--primary-color);">â†’</div>
                    <div style="background: white; padding: 20px; border-radius: 8px; text-align: center; min-width: 150px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ¤–</div>
                        <div><strong>2. ç”Ÿæˆå¤šä¸ªç­”æ¡ˆ</strong></div>
                        <div style="font-size: 0.85rem; color: var(--text-light);">æ¨¡å‹ç”Ÿæˆ4ä¸ªå›ç­”</div>
                    </div>
                    <div style="font-size: 1.5rem; color: var(--primary-color);">â†’</div>
                    <div style="background: white; padding: 20px; border-radius: 8px; text-align: center; min-width: 150px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ‘¥</div>
                        <div><strong>3. äººç±»æ’åº</strong></div>
                        <div style="font-size: 0.85rem; color: var(--text-light);">æ ‡æ³¨å‘˜æ’åºç­”æ¡ˆ</div>
                    </div>
                    <div style="font-size: 1.5rem; color: var(--primary-color);">â†’</div>
                    <div style="background: white; padding: 20px; border-radius: 8px; text-align: center; min-width: 150px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ¯</div>
                        <div><strong>4. è®­ç»ƒå¥–åŠ±æ¨¡å‹</strong></div>
                        <div style="font-size: 0.85rem; color: var(--text-light);">å­¦ä¹ äººç±»åå¥½</div>
                    </div>
                    <div style="font-size: 1.5rem; color: var(--primary-color);">â†’</div>
                    <div style="background: white; padding: 20px; border-radius: 8px; text-align: center; min-width: 150px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ”„</div>
                        <div><strong>5. ä¼˜åŒ–æ¨¡å‹</strong></div>
                        <div style="font-size: 0.85rem; color: var(--text-light);">RLå¾ªç¯ä¼˜åŒ–</div>
                    </div>
                </div>
            </div>

            <h2>ç« èŠ‚æµ‹éªŒ</h2>

            <div class="quiz-container" data-quiz-id="ch03-quiz-1">
                <div class="quiz-question">1. å¤§æ¨¡å‹è®­ç»ƒçš„æ­£ç¡®é¡ºåºæ˜¯ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch03q1" value="0" class="quiz-radio">
                        <span>å¾®è°ƒ â†’ é¢„è®­ç»ƒ â†’ å¼ºåŒ–å­¦ä¹ </span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch03q1" value="1" class="quiz-radio">
                        <span>é¢„è®­ç»ƒ â†’ å¾®è°ƒ â†’ å¼ºåŒ–å­¦ä¹ </span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch03q1" value="2" class="quiz-radio">
                        <span>å¼ºåŒ–å­¦ä¹  â†’ é¢„è®­ç»ƒ â†’ å¾®è°ƒ</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch03-quiz-2">
                <div class="quiz-question">2. é¢„è®­ç»ƒçš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch03q2" value="0" class="quiz-radio">
                        <span>ç›‘ç£å­¦ä¹ </span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch03q2" value="1" class="quiz-radio">
                        <span>è‡ªç›‘ç£å­¦ä¹ </span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch03q2" value="2" class="quiz-radio">
                        <span>æ— ç›‘ç£å­¦ä¹ </span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch03-quiz-3">
                <div class="quiz-question">3. RLHFä¸­çš„"HF"ä»£è¡¨ä»€ä¹ˆï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch03q3" value="0" class="quiz-radio">
                        <span>Human Feedbackï¼ˆäººç±»åé¦ˆï¼‰</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch03q3" value="1" class="quiz-radio">
                        <span>High Frequencyï¼ˆé«˜é¢‘ï¼‰</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch03q3" value="2" class="quiz-radio">
                        <span>Host Functionï¼ˆä¸»æœºåŠŸèƒ½ï¼‰</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch03-quiz-4">
                <div class="quiz-question">4. "Quality Is All You Need"å¼ºè°ƒçš„æ˜¯å¾®è°ƒçš„ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch03q4" value="0" class="quiz-radio">
                        <span>éœ€è¦å¤§é‡æ•°æ®</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch03q4" value="1" class="quiz-radio">
                        <span>å¯¹èµ„æ–™è´¨é‡è¦æ±‚å¾ˆé«˜</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch03q4" value="2" class="quiz-radio">
                        <span>éœ€è¦å¾ˆé•¿æ—¶é—´è®­ç»ƒ</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>
        </div>

        <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
        <div style="text-align: center; margin-top: 40px; margin-bottom: 20px;">
            <a href="../index.html" class="back-btn" style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; background: var(--primary-color); color: white; text-decoration: none; border-radius: 8px; font-weight: 500;">
                <span>ğŸ </span>
                <span>è¿”å›è¯¾ç¨‹é¦–é¡µ</span>
            </a>
        </div>

        <!-- ç¤¾äº¤åˆ†äº« -->
        <div class="share-buttons">
            <a href="#" class="share-btn share-wechat" data-share-type="wechat">
                <span>ğŸ’¬</span>
                <span>åˆ†äº«åˆ°å¾®ä¿¡</span>
            </a>
            <a href="#" class="share-btn share-weibo" data-share-type="weibo">
                <span>ğŸ“±</span>
                <span>åˆ†äº«åˆ°å¾®åš</span>
            </a>
            <a href="#" class="share-btn share-copy" data-share-type="copy">
                <span>ğŸ”—</span>
                <span>å¤åˆ¶é“¾æ¥</span>
            </a>
        </div>
    </main>

    <script src="../js/main.js"></script>
    <script>
        // æ’åºæ¸¸æˆ
        const phases = [
            { id: 'finetune', name: 'å¾®è°ƒ', icon: 'ğŸ“' },
            { id: 'pretrain', name: 'é¢„è®­ç»ƒ', icon: 'ğŸ“š' },
            { id: 'rlhf', name: 'å¼ºåŒ–å­¦ä¹ ', icon: 'ğŸ¯' }
        ];

        const correctOrder = ['pretrain', 'finetune', 'rlhf'];
        let userOrder = [];

        function initSortingGame() {
            const container = document.getElementById('phasesContainer');
            const sorted = document.getElementById('sortedPhases');

            // æ‰“ä¹±é¡ºåº
            const shuffled = [...phases].sort(() => Math.random() - 0.5);

            shuffled.forEach(phase => {
                const card = document.createElement('div');
                card.className = 'phase-card';
                card.dataset.id = phase.id;
                card.style.cssText = `
                    background: white;
                    padding: 15px 20px;
                    border-radius: 8px;
                    cursor: pointer;
                    border: 2px solid var(--border-color);
                    transition: all 0.2s;
                    min-width: 120px;
                    text-align: center;
                    user-select: none;
                `;
                card.innerHTML = `
                    <div style="font-size: 1.5rem;">${phase.icon}</div>
                    <div style="font-weight: 500; margin-top: 5px;">${phase.name}</div>
                `;

                card.addEventListener('click', () => {
                    if (card.parentElement === container) {
                        sorted.appendChild(card);
                        userOrder.push(phase.id);
                    } else {
                        container.appendChild(card);
                        userOrder = userOrder.filter(id => id !== phase.id);
                    }
                });

                container.appendChild(card);
            });
        }

        document.getElementById('checkOrderBtn').addEventListener('click', () => {
            const feedback = document.getElementById('orderFeedback');
            const sortedCards = document.querySelectorAll('#sortedPhases .phase-card');
            const currentOrder = Array.from(sortedCards).map(card => card.dataset.id);

            if (currentOrder.length < 3) {
                feedback.style.display = 'block';
                feedback.textContent = 'è¯·å°†æ‰€æœ‰é˜¶æ®µæ‹–åˆ°ä¸‹æ–¹åŒºåŸŸåå†æ£€æŸ¥';
                feedback.className = 'prompt-preview';
                return;
            }

            const isCorrect = JSON.stringify(currentOrder) === JSON.stringify(correctOrder);

            feedback.style.display = 'block';
            if (isCorrect) {
                feedback.className = 'prompt-preview';
                feedback.style.borderLeftColor = 'var(--success-color)';
                feedback.innerHTML = 'âœ… <strong>æ­£ç¡®ï¼</strong><br><br>å¤§æ¨¡å‹è®­ç»ƒçš„æ­£ç¡®é¡ºåºæ˜¯ï¼š<br>1ï¸âƒ£ é¢„è®­ç»ƒ - è®©æ¨¡å‹"å¬å¾—æ‡‚äººè¯"<br>2ï¸âƒ£ å¾®è°ƒ - è®©æ¨¡å‹"èƒ½å¹²ä¸“ä¸šäº‹"<br>3ï¸âƒ£ å¼ºåŒ–å­¦ä¹  - è®©æ¨¡å‹"å®ˆä½é“å¾·çº¿"';
            } else {
                feedback.className = 'prompt-preview';
                feedback.style.borderLeftColor = '#ef4444';
                feedback.innerHTML = 'âŒ <strong>é¡ºåºä¸å¯¹</strong><br><br>æç¤ºï¼šå…ˆè®©æ¨¡å‹å­¦ä¹ åŸºç¡€çŸ¥è¯†ï¼Œå†è®©å®ƒæŒæ¡ä¸“ä¸šæŠ€èƒ½ï¼Œæœ€åè®©å®ƒå­¦ä¼š"åšäºº"ã€‚å†è¯•è¯•çœ‹ï¼';
            }
        });

        initSortingGame();

        // ç« èŠ‚æµ‹éªŒé€»è¾‘
        const ch03QuizAnswers = {
            'ch03-quiz-1': { correct: '1', explanation: 'æ­£ç¡®ï¼å¤§æ¨¡å‹è®­ç»ƒçš„æ­£ç¡®é¡ºåºæ˜¯ï¼šé¢„è®­ç»ƒ â†’ å¾®è°ƒ â†’ å¼ºåŒ–å­¦ä¹ ã€‚é¢„è®­ç»ƒè®©æ¨¡å‹"å¬å¾—æ‡‚äººè¯"ï¼Œå¾®è°ƒè®©æ¨¡å‹"èƒ½å¹²ä¸“ä¸šäº‹"ï¼Œå¼ºåŒ–å­¦ä¹ è®©æ¨¡å‹"å®ˆä½é“å¾·çº¿"ã€‚' },
            'ch03-quiz-2': { correct: '1', explanation: 'æ­£ç¡®ï¼é¢„è®­ç»ƒçš„æœ¬è´¨æ˜¯è‡ªç›‘ç£å­¦ä¹ ã€‚å®ƒèƒ½ä»æ•°æ®æœ¬èº«ç”Ÿæˆ"ä¼ªæ ‡ç­¾"ï¼Œæ— éœ€å¤–éƒ¨æ ‡æ³¨ã€‚ä¾‹å¦‚é¢„æµ‹ä¸‹ä¸€ä¸ªè¯æ—¶ï¼Œ"é¥¼å¹²"å°±æ˜¯ä»"æˆ‘ä»Šå¤©å»è¶…å¸‚ä¹°äº†"ä¸­æå–çš„å¤©ç„¶æ ‡ç­¾ã€‚' },
            'ch03-quiz-3': { correct: '0', explanation: 'æ­£ç¡®ï¼RLHF = Reinforcement Learning from Human Feedbackï¼Œå³"åŸºäºäººç±»åé¦ˆçš„å¼ºåŒ–å­¦ä¹ "ã€‚æ ¸å¿ƒæ˜¯è®©AIé€šè¿‡"è¯•é”™-å¥–åŠ±"æœºåˆ¶æ¥å­¦ä¹ äººç±»åå¥½ã€‚' },
            'ch03-quiz-4': { correct: '1', explanation: 'æ­£ç¡®ï¼"Quality Is All You Need"å¼ºè°ƒçš„æ˜¯è´¨é‡ã€‚å¾®è°ƒä¸éœ€è¦å¤§é‡èµ„æ–™ï¼Œä½†å¯¹èµ„æ–™è´¨é‡è¦æ±‚å¾ˆé«˜ã€‚Less Is More for Alignmentã€‚' }
        };

        document.querySelectorAll('.submit-quiz-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const container = btn.closest('.quiz-container');
                const selected = container.querySelector('.quiz-radio:checked');
                const feedback = container.querySelector('.quiz-feedback');
                const options = container.querySelectorAll('.quiz-option');

                if (!selected) {
                    alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆ');
                    return;
                }

                const quizId = container.getAttribute('data-quiz-id');
                const quiz = ch03QuizAnswers[quizId];

                feedback.classList.remove('correct', 'incorrect');
                feedback.classList.add('show');

                if (selected.value === quiz.correct) {
                    feedback.classList.add('correct');
                    feedback.innerHTML = `<strong>âœ“ å›ç­”æ­£ç¡®ï¼</strong><p>${quiz.explanation}</p>`;
                    options.forEach(opt => {
                        if (opt.querySelector('.quiz-radio').value === quiz.correct) {
                            opt.classList.add('correct');
                        }
                    });
                } else {
                    feedback.classList.add('incorrect');
                    feedback.innerHTML = `<strong>âœ— å›ç­”é”™è¯¯</strong><p>${quiz.explanation}</p>`;
                    options.forEach(opt => {
                        if (opt.querySelector('.quiz-radio').value === quiz.correct) {
                            opt.classList.add('correct');
                        } else if (opt.querySelector('.quiz-radio').checked) {
                            opt.classList.add('incorrect');
                        }
                    });
                }

                btn.disabled = true;
                btn.textContent = 'å·²å®Œæˆ';
            });
        });
    </script>
</body>
</html>
