<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·±å…¥äº†è§£ - å¤§è¯­è¨€æ¨¡å‹åŸç†</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header class="top-header">
        <div class="logo">
            <span class="logo-icon">ğŸ¤–</span>
            <span class="logo-text">ç”Ÿæˆå¼AIå…¥é—¨è¯¾ç¨‹</span>
        </div>
    </header>

    <main class="deep-page">
        <div class="deep-header">
            <a href="../index.html#ch02" class="back-btn">
                <span>â†</span>
                <span>è¿”å›è¯¾ç¨‹é¦–é¡µ</span>
            </a>
        </div>

        <h1 class="deep-title">æ·±å…¥äº†è§£ï¼šå¤§è¯­è¨€æ¨¡å‹åŸç†</h1>

        <div class="deep-content">
            <h2>Tokenè®¡ç®—å™¨</h2>
            <p>è¾“å…¥ä¸€æ®µæ–‡æœ¬ï¼Œçœ‹çœ‹å®ƒä¼šè¢«æ‹†åˆ†æˆå¤šå°‘ä¸ªtokenï¼š</p>

            <div class="prompt-generator">
                <div class="form-group">
                    <label class="form-label">è¾“å…¥æ–‡æœ¬</label>
                    <textarea id="tokenInput" class="form-textarea" rows="3" placeholder="è¯·è¾“å…¥ä¸€æ®µä¸­æ–‡æˆ–è‹±æ–‡æ–‡æœ¬...">ä½ å¥½ï¼Œä¸–ç•Œï¼</textarea>
                </div>
                <button id="tokenCountBtn" class="btn-generate">è®¡ç®—Tokenæ•°é‡</button>
                <div id="tokenResult" class="prompt-preview" style="display: none;"></div>
            </div>

            <h2>æ–‡å­—æ¥é¾™æ¼”ç¤º</h2>
            <p>ä½“éªŒLLMçš„å·¥ä½œåŸç†â€”â€”é€å­—é¢„æµ‹ï¼š</p>

            <div class="prompt-generator">
                <div class="form-group">
                    <label class="form-label">è¾“å…¥å¼€å¤´</label>
                    <input id="chainInput" class="form-input" type="text" value="ä»Šå¤©å¤©æ°”" placeholder="è¾“å…¥ä¸€ä¸ªå¥å­å¼€å¤´..." readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">æ¸©åº¦å‚æ•° (0-1)</label>
                    <input id="tempInput" class="form-input" type="range" min="0" max="1" step="0.1" value="0.7" style="width: 100%;">
                    <div style="text-align: center; margin-top: 5px;">
                        <span id="tempValue">0.7</span>
                    </div>
                </div>
                <button id="chainBtn" class="btn-generate">å¼€å§‹æ–‡å­—æ¥é¾™</button>
                <div id="chainResult" class="prompt-preview" style="display: none;"></div>
            </div>

            <h2>Temperatureå‚æ•°å¯è§†åŒ–</h2>
            <p>è§‚å¯Ÿä¸åŒæ¸©åº¦å‚æ•°ä¸‹çš„æ¦‚ç‡åˆ†å¸ƒå˜åŒ–ï¼š</p>

            <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 10px; margin: 20px 0;">
                <div style="margin-bottom: 15px;">
                    <label class="form-label">æ¸©åº¦å‚æ•°ï¼š <span id="tempDisplay">0.5</span></label>
                    <input id="tempSlider" type="range" min="0" max="1" step="0.1" value="0.5" style="width: 100%;">
                </div>
                <div id="probVisualization" style="display: flex; align-items: flex-end; gap: 10px; height: 200px; padding: 20px; background: white; border-radius: 8px;">
                    <!-- åŠ¨æ€ç”Ÿæˆçš„æ¦‚ç‡æŸ± -->
                </div>
            </div>

            <h2>å¼€æº vs é—­æºæ¨¡å‹å¯¹æ¯”</h2>

            <table style="width:100%; border-collapse: collapse; margin: 20px 0;">
                <tr style="background: var(--bg-tertiary);">
                    <th style="padding: 12px; border: 1px solid var(--border-color);">ç‰¹æ€§</th>
                    <th style="padding: 12px; border: 1px solid var(--border-color);">å¼€æºæ¨¡å‹</th>
                    <th style="padding: 12px; border: 1px solid var(--border-color);">é—­æºæ¨¡å‹</th>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æˆæœ¬</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">ä½ï¼ˆå¯æœ¬åœ°éƒ¨ç½²ï¼‰</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æŒ‰APIè°ƒç”¨è®¡è´¹</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">å¯å®šåˆ¶æ€§</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">é«˜</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">ä½</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æ•°æ®éšç§</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æ•°æ®ç•™åœ¨æœ¬åœ°</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æ•°æ®ä¼ è¾“åˆ°äº‘ç«¯</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æ€§èƒ½</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æŒç»­æå‡</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">é€šå¸¸æœ€å…ˆè¿›</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">ä»£è¡¨</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">Llama, Qwen, DeepSeek</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">GPT-4, Claude</td>
                </tr>
            </table>

            <h2>ç« èŠ‚æµ‹éªŒ</h2>

            <div class="quiz-container" data-quiz-id="ch02-quiz-1">
                <div class="quiz-question">1. LLMçš„æ ¸å¿ƒå·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch02q1" value="0" class="quiz-radio">
                        <span>ç›´æ¥ç”Ÿæˆå®Œæ•´ç­”æ¡ˆ</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch02q1" value="1" class="quiz-radio">
                        <span>é€å­—é¢„æµ‹ä¸‹ä¸€ä¸ªtoken</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch02q1" value="2" class="quiz-radio">
                        <span>åˆ†æè¯­æ³•ç»“æ„</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch02-quiz-2">
                <div class="quiz-question">2. Temperatureå‚æ•°è®¾ä¸º0æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch02q2" value="0" class="quiz-radio">
                        <span>è¾“å‡ºæœ€éšæœºã€æœ€æœ‰åˆ›æ„</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch02q2" value="1" class="quiz-radio">
                        <span>è¾“å‡ºæœ€ä¿å®ˆã€æœ€ç¡®å®š</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch02q2" value="2" class="quiz-radio">
                        <span>ä¸ä¼šè¾“å‡ºä»»ä½•å†…å®¹</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch02-quiz-3">
                <div class="quiz-question">3. ä»€ä¹ˆæ˜¯"å¹»è§‰"ï¼ˆHallucinationï¼‰ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch02q3" value="0" class="quiz-radio">
                        <span>æ¨¡å‹ç”Ÿæˆäº†è¶…å‡ºé¢„æœŸçš„åˆ›æ„å†…å®¹</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch02q3" value="1" class="quiz-radio">
                        <span>æ¨¡å‹ç¼–é€ çœ‹ä¼¼åˆç†ä½†å®é™…é”™è¯¯çš„ä¿¡æ¯</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch02q3" value="2" class="quiz-radio">
                        <span>æ¨¡å‹æ— æ³•ç†è§£è¾“å…¥å†…å®¹</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch02-quiz-4">
                <div class="quiz-question">4. ä»¥ä¸‹å“ªé¡¹ä¸æ˜¯å‡å°‘å¹»è§‰çš„æ–¹æ³•ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch02q4" value="0" class="quiz-radio">
                        <span>è°ƒä½temperatureå‚æ•°</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch02q4" value="1" class="quiz-radio">
                        <span>ä¼˜åŒ–promptæä¾›ç²¾ç¡®ä¸Šä¸‹æ–‡</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch02q4" value="2" class="quiz-radio">
                        <span>è°ƒé«˜temperatureå‚æ•°å¢åŠ éšæœºæ€§</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>
        </div>

        <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
        <div style="text-align: center; margin-top: 40px; margin-bottom: 20px;">
            <a href="../index.html" class="back-btn" style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; background: var(--primary-color); color: white; text-decoration: none; border-radius: 8px; font-weight: 500;">
                <span>ğŸ </span>
                <span>è¿”å›è¯¾ç¨‹é¦–é¡µ</span>
            </a>
        </div>

        <!-- ç¤¾äº¤åˆ†äº« -->
        <div class="share-buttons">
            <a href="#" class="share-btn share-wechat" data-share-type="wechat">
                <span>ğŸ’¬</span>
                <span>åˆ†äº«åˆ°å¾®ä¿¡</span>
            </a>
            <a href="#" class="share-btn share-weibo" data-share-type="weibo">
                <span>ğŸ“±</span>
                <span>åˆ†äº«åˆ°å¾®åš</span>
            </a>
            <a href="#" class="share-btn share-copy" data-share-type="copy">
                <span>ğŸ”—</span>
                <span>å¤åˆ¶é“¾æ¥</span>
            </a>
        </div>
    </main>

    <script src="../js/main.js"></script>
    <script>
        // Tokenè®¡æ•°æ¨¡æ‹Ÿ
        document.getElementById('tokenCountBtn').addEventListener('click', () => {
            const input = document.getElementById('tokenInput').value;
            // ç®€å•æ¨¡æ‹Ÿï¼šä¸­æ–‡çº¦1å­—1tokenï¼Œè‹±æ–‡çº¦4å­—ç¬¦1token
            let tokenCount = 0;
            const chineseChars = input.match(/[\u4e00-\u9fa5]/g) || [];
            const nonChinese = input.replace(/[\u4e00-\u9fa5]/g, '');

            tokenCount = chineseChars.length + Math.ceil(nonChinese.length / 4);

            const result = document.getElementById('tokenResult');
            result.style.display = 'block';
            result.textContent = `æ–‡æœ¬é•¿åº¦ï¼š${input.length} å­—ç¬¦\né¢„ä¼°Tokenæ•°ï¼š${tokenCount} tokens\n\næ³¨æ„ï¼šè¿™æ˜¯ç²—ç•¥ä¼°ç®—ï¼Œå®é™…tokenæ•°é‡å–å†³äºåˆ†è¯å™¨ã€‚`;
        });

        // æ¸©åº¦æ»‘å—
        document.getElementById('tempInput').addEventListener('input', (e) => {
            document.getElementById('tempValue').textContent = e.target.value;
        });

        // æ–‡å­—æ¥é¾™æ¨¡æ‹Ÿ
        document.getElementById('chainBtn').addEventListener('click', () => {
            const input = document.getElementById('chainInput').value;
            const temp = document.getElementById('tempInput').value;
            const result = document.getElementById('chainResult');

            // ç®€å•æ¨¡æ‹Ÿç»­å†™
            const continuations = [
                'å¾ˆ', 'çœŸ', 'çœŸä¸é”™', 'ä¸é”™', 'çœŸå¥½', 'éå¸¸å¥½', 'æ™´æœ—', 'é˜´å¤©'
            ];

            let selected;
            if (temp < 0.3) {
                // ä½æ¸©ï¼šé€‰æ‹©æœ€å¸¸è§çš„
                selected = continuations[0];
            } else if (temp > 0.7) {
                // é«˜æ¸©ï¼šéšæœºé€‰æ‹©
                selected = continuations[Math.floor(Math.random() * continuations.length)];
            } else {
                // ä¸­æ¸©ï¼šæœ‰ä¸€å®šéšæœºæ€§
                selected = continuations[Math.floor(Math.random() * 4)];
            }

            result.style.display = 'block';
            result.textContent = `è¾“å…¥ï¼š${input}\næ¸©åº¦ï¼š${temp}\n\né¢„æµ‹çš„ä¸‹ä¸€ä¸ªè¯ï¼š"${selected}"\n\nå®Œæ•´è¾“å‡ºï¼š${input}${selected}`;
        });

        // æ¦‚ç‡å¯è§†åŒ–
        const words = ['å¾ˆ', 'çœŸ', 'ä¸é”™', 'å¥½', 'æ™´æœ—'];
        function updateProbVisualization() {
            const temp = parseFloat(document.getElementById('tempSlider').value);
            document.getElementById('tempDisplay').textContent = temp.toFixed(1);

            const container = document.getElementById('probVisualization');
            container.innerHTML = '';

            let probs;
            if (temp < 0.3) {
                // ä½æ¸©ï¼šåˆ†å¸ƒé›†ä¸­
                probs = [60, 25, 8, 5, 2];
            } else if (temp > 0.7) {
                // é«˜æ¸©ï¼šåˆ†å¸ƒå‡åŒ€
                probs = [22, 20, 21, 19, 18];
            } else {
                // ä¸­æ¸©ï¼šé€‚ä¸­
                probs = [40, 25, 15, 12, 8];
            }

            const colors = ['#2563eb', '#7c3aed', '#06b6d4', '#10b981', '#f59e0b'];

            words.forEach((word, i) => {
                const bar = document.createElement('div');
                bar.style.cssText = `
                    flex: 1;
                    background: linear-gradient(to top, ${colors[i]}, ${colors[i]}88);
                    border-radius: 6px 6px 0 0;
                    position: relative;
                    transition: height 0.3s ease;
                    height: ${probs[i] * 2}px;
                    min-height: 30px;
                `;

                const label = document.createElement('div');
                label.textContent = word;
                label.style.cssText = `
                    position: absolute;
                    bottom: -25px;
                    left: 50%;
                    transform: translateX(-50%);
                    font-size: 0.85rem;
                    font-weight: 500;
                `;

                const probLabel = document.createElement('div');
                probLabel.textContent = probs[i] + '%';
                probLabel.style.cssText = `
                    position: absolute;
                    top: -20px;
                    left: 50%;
                    transform: translateX(-50%);
                    font-size: 0.8rem;
                    color: var(--text-secondary);
                `;

                bar.appendChild(label);
                bar.appendChild(probLabel);
                container.appendChild(bar);
            });
        }

        document.getElementById('tempSlider').addEventListener('input', updateProbVisualization);
        updateProbVisualization();

        // ç« èŠ‚æµ‹éªŒé€»è¾‘
        const ch02QuizAnswers = {
            'ch02-quiz-1': { correct: '1', explanation: 'æ­£ç¡®ï¼LLMçš„æ ¸å¿ƒæ˜¯é€å­—é¢„æµ‹ä¸‹ä¸€ä¸ªtokenï¼Œè¿›è¡Œ"æ–‡å­—æ¥é¾™"ã€‚å®ƒä¸ä¼šç›´æ¥ç”Ÿæˆå®Œæ•´ç­”æ¡ˆï¼Œè€Œæ˜¯ä¸€ä¸ªå­—ä¸€ä¸ªå­—åœ°é¢„æµ‹è¾“å‡ºã€‚' },
            'ch02-quiz-2': { correct: '1', explanation: 'æ­£ç¡®ï¼Temperatureè®¾ä¸º0æ—¶ï¼Œæ¨¡å‹å§‹ç»ˆé€‰æ‹©æ¦‚ç‡æœ€é«˜çš„ä¸‹ä¸€ä¸ªè¯ï¼Œè¾“å‡ºç»“æœå®Œå…¨ç¡®å®šï¼Œæœ€ä¿å®ˆã€‚' },
            'ch02-quiz-3': { correct: '1', explanation: 'æ­£ç¡®ï¼"å¹»è§‰"æ˜¯æŒ‡æ¨¡å‹ç¼–é€ çœ‹ä¼¼åˆç†ä½†å®é™…é”™è¯¯çš„ä¿¡æ¯ã€‚è¿™æ˜¯å› ä¸ºæ¨¡å‹çš„æœ¬è´¨æ˜¯"æ¦‚ç‡çŒœè¯"ï¼Œå½“è®­ç»ƒæ•°æ®ç¼ºå¤±æˆ–ä¸Šä¸‹æ–‡çŸ›ç›¾æ—¶ï¼Œå¯èƒ½ç”¨çœ‹ä¼¼åˆç†çš„ç­”æ¡ˆæ¥"ç³Šå¼„"ä½ ã€‚' },
            'ch02-quiz-4': { correct: '2', explanation: 'æ­£ç¡®ï¼è°ƒé«˜temperatureå‚æ•°ä¼šå¢åŠ éšæœºæ€§ï¼Œå¯èƒ½äº§ç”Ÿæ›´å¤šå¹»è§‰ï¼Œè¿™ä¸æ˜¯å‡å°‘å¹»è§‰çš„æ–¹æ³•ã€‚å‡å°‘å¹»è§‰çš„æ–¹æ³•åŒ…æ‹¬ï¼šè°ƒä½temperatureã€ä¼˜åŒ–promptæä¾›ç²¾ç¡®ä¸Šä¸‹æ–‡ç­‰ã€‚' }
        };

        document.querySelectorAll('.submit-quiz-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const container = btn.closest('.quiz-container');
                const selected = container.querySelector('.quiz-radio:checked');
                const feedback = container.querySelector('.quiz-feedback');
                const options = container.querySelectorAll('.quiz-option');

                if (!selected) {
                    alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆ');
                    return;
                }

                const quizId = container.getAttribute('data-quiz-id');
                const quiz = ch02QuizAnswers[quizId];

                feedback.classList.remove('correct', 'incorrect');
                feedback.classList.add('show');

                if (selected.value === quiz.correct) {
                    feedback.classList.add('correct');
                    feedback.innerHTML = `<strong>âœ“ å›ç­”æ­£ç¡®ï¼</strong><p>${quiz.explanation}</p>`;
                    options.forEach(opt => {
                        if (opt.querySelector('.quiz-radio').value === quiz.correct) {
                            opt.classList.add('correct');
                        }
                    });
                } else {
                    feedback.classList.add('incorrect');
                    feedback.innerHTML = `<strong>âœ— å›ç­”é”™è¯¯</strong><p>${quiz.explanation}</p>`;
                    options.forEach(opt => {
                        if (opt.querySelector('.quiz-radio').value === quiz.correct) {
                            opt.classList.add('correct');
                        } else if (opt.querySelector('.quiz-radio').checked) {
                            opt.classList.add('incorrect');
                        }
                    });
                }

                btn.disabled = true;
                btn.textContent = 'å·²å®Œæˆ';
            });
        });
    </script>
</body>
</html>
