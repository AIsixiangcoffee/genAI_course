<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·±å…¥äº†è§£ - æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header class="top-header">
        <div class="logo">
            <span class="logo-icon">ğŸ¤–</span>
            <span class="logo-text">ç”Ÿæˆå¼AIå…¥é—¨è¯¾ç¨‹</span>
        </div>
    </header>

    <main class="deep-page">
        <div class="deep-header">
            <a href="../index.html#ch08" class="back-btn">
                <span>â†</span>
                <span>è¿”å›è¯¾ç¨‹é¦–é¡µ</span>
            </a>
        </div>

        <h1 class="deep-title">æ·±å…¥äº†è§£ï¼šæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰</h1>

        <div class="deep-content">
            <h2>RAGå·¥ä½œæµç¨‹æ¼”ç¤º</h2>
            <p>ä½“éªŒRAGçš„å®Œæ•´æµç¨‹ï¼š</p>

            <div id="ragDemo" style="background: var(--bg-tertiary); padding: 25px; border-radius: 10px; margin: 20px 0;">
                <div class="form-group">
                    <label class="form-label">è¾“å…¥é—®é¢˜</label>
                    <input id="ragInput" class="form-input" type="text" placeholder="ä¾‹å¦‚ï¼šä»€ä¹ˆæ˜¯Transformerï¼Ÿ" value="ä»€ä¹ˆæ˜¯Transformerï¼Ÿ">
                </div>
                <button id="ragBtn" class="btn-generate">ğŸ” æ‰§è¡ŒRAGæµç¨‹</button>
                <div id="ragResult" style="margin-top: 20px;"></div>
            </div>

            <h2>RAG vs å¾®è°ƒé€‰æ‹©æŒ‡å—</h2>

            <div style="background: var(--bg-tertiary); padding: 25px; border-radius: 10px; margin: 20px 0;">
                <h3 style="margin-bottom: 15px;">å†³ç­–æ ‘</h3>
                <div style="background: white; padding: 20px; border-radius: 8px;">
                    <p><strong>é—®é¢˜1ï¼šæ•°æ®æ˜¯å¦ç»å¸¸å˜åŒ–ï¼Ÿ</strong></p>
                    <p style="margin-left: 20px;">â†’ æ˜¯ï¼šé€‰æ‹© RAG</p>
                    <p style="margin-left: 20px;">â†’ å¦ï¼šç»§ç»­</p>

                    <p style="margin-top: 15px;"><strong>é—®é¢˜2ï¼šæ•°æ®é‡æ˜¯å¦å¾ˆå¤§ï¼ˆ>100ä¸‡æ–‡æ¡£ï¼‰ï¼Ÿ</strong></p>
                    <p style="margin-left: 20px;">â†’ æ˜¯ï¼šé€‰æ‹© RAG</p>
                    <p style="margin-left: 20px;">â†’ å¦ï¼šç»§ç»­</p>

                    <p style="margin-top: 15px;"><strong>é—®é¢˜3ï¼šæ˜¯å¦éœ€è¦ç‰¹å®šæ ¼å¼æˆ–é£æ ¼ï¼Ÿ</strong></p>
                    <p style="margin-left: 20px;">â†’ æ˜¯ï¼šé€‰æ‹© å¾®è°ƒ</p>
                    <p style="margin-left: 20px;">â†’ å¦ï¼šé€‰æ‹© RAG</p>
                </div>
            </div>

            <h2>RAGæŠ€æœ¯æ ˆ</h2>

            <div style="display: grid; gap: 15px; margin: 20px 0;">
                <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #2563eb;">
                    <h3 style="color: #2563eb;">ğŸ“„ æ–‡æ¡£åŠ è½½</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">LangChain Loaders, LlamaIndex</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #7c3aed;">
                    <h3 style="color: #7c3aed;">âœ‚ï¸ æ–‡æœ¬åˆ†å‰²</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">RecursiveCharacterTextSplitter, TokenTextSplitter</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #06b6d4;">
                    <h3 style="color: #06b6d4;">ğŸ”¢ å‘é‡åŒ–</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">OpenAI Embeddings, HuggingFace Embeddings</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #10b981;">
                    <h3 style="color: #10b981;">ğŸ—„ï¸ å‘é‡æ•°æ®åº“</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">Chroma, Pinecone, Weaviate, Qdrant, Milvus</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #f59e0b;">
                    <h3 style="color: #f59e0b;">ğŸ”— æ£€ç´¢ä¸ç”Ÿæˆ</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">LangChain Chains, LlamaIndex Queries</p>
                </div>
            </div>

            <h2>RAGåº”ç”¨ç¤ºä¾‹ä»£ç </h2>

            <div class="code-demo">
                <div class="code-header">
                    <span class="code-title">ç®€å•RAGå®ç°ï¼ˆLangChainï¼‰</span>
                    <button class="copy-btn" data-copy-target="code-rag">å¤åˆ¶ä»£ç </button>
                </div>
                <pre class="code-block" id="code-rag"><code><span class="code-keyword">from</span> langchain.embeddings <span class="code-keyword">import</span> OpenAIEmbeddings
<span class="code-keyword">from</span> langchain.vectorstores <span class="code-keyword">import</span> Chroma
<span class="code-keyword">from</span> langchain.chat_models <span class="code-keyword">import</span> ChatOpenAI
<span class="code-keyword">from</span> langchain.chains <span class="code-keyword">import</span> RetrievalQA

<span class="code-comment"># 1. åŠ è½½æ–‡æ¡£</span>
<span class="code-keyword">from</span> langchain.document_loaders <span class="code-keyword">import</span> TextLoader
loader = TextLoader(<span class="code-string">"my_document.txt"</span>)
documents = loader.<span class="code-function">load</span>()

<span class="code-comment"># 2. åˆ†å‰²æ–‡æ¡£</span>
<span class="code-keyword">from</span> langchain.text_splitter <span class="code-keyword">import</span> RecursiveCharacterTextSplitter
text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=<span class="code-number">1000</span>,
    chunk_overlap=<span class="code-number">200</span>
)
splits = text_splitter.<span class="code-function">split_documents</span>(documents)

<span class="code-comment"># 3. åˆ›å»ºå‘é‡æ•°æ®åº“</span>
vectorstore = Chroma.<span class="code-function">from_documents</span>(
    documents=splits,
    embedding=OpenAIEmbeddings()
)

<span class="code-comment"># 4. åˆ›å»ºæ£€ç´¢å™¨</span>
retriever = vectorstore.<span class="code-function">as_retriever</span>()

<span class="code-comment"># 5. åˆ›å»ºQAé“¾</span>
qa_chain = RetrievalQA.<span class="code-function">from_chain_type</span>(
    llm=ChatOpenAI(model=<span class="code-string">"gpt-3.5-turbo"</span>),
    chain_type=<span class="code-string">"stuff"</span>,
    retriever=retriever
)

<span class="code-comment"># 6. æŸ¥è¯¢</span>
query = <span class="code-string">"ä»€ä¹ˆæ˜¯RAGï¼Ÿ"</span>
result = qa_chain.<span class="code-function">invoke</span>(query)
<span class="code-function">print</span>(result[<span class="code-string">'result'</span>])</code></pre>
            </div>

            <h2>ç« èŠ‚æµ‹éªŒ</h2>

            <div class="quiz-container" data-quiz-id="ch08-quiz-1">
                <div class="quiz-question">1. RAGçš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch08q1" value="0" class="quiz-radio">
                        <span>åŠ å¿«æ¨¡å‹è®­ç»ƒé€Ÿåº¦</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch08q1" value="1" class="quiz-radio">
                        <span>é€šè¿‡æ£€ç´¢å¤–éƒ¨æ–‡æ¡£å¢å¼ºLLMï¼Œæä¾›å‡†ç¡®ä¸Šä¸‹æ–‡</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch08q1" value="2" class="quiz-radio">
                        <span>å‡å°‘æ¨¡å‹å‚æ•°é‡</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch08-quiz-2">
                <div class="quiz-question">2. RAGç›¸æ¯”å¾®è°ƒçš„ä¸»è¦ä¼˜åŠ¿æ˜¯ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch08q2" value="0" class="quiz-radio">
                        <span>æ— éœ€é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œé€‚åˆæ•°æ®ç»å¸¸å˜åŒ–çš„åœºæ™¯</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch08q2" value="1" class="quiz-radio">
                        <span>æ€§èƒ½æ›´å¼º</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch08q2" value="2" class="quiz-radio">
                        <span>å®Œå…¨å…è´¹</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch08-quiz-3">
                <div class="quiz-question">3. å‘é‡æ•°æ®åº“åœ¨RAGä¸­çš„ä½œç”¨æ˜¯ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch08q3" value="0" class="quiz-radio">
                        <span>å­˜å‚¨åŸå§‹æ–‡æ¡£</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch08q3" value="1" class="quiz-radio">
                        <span>å­˜å‚¨æ–‡æ¡£å‘é‡ï¼Œæ”¯æŒå¿«é€Ÿç›¸ä¼¼åº¦æ£€ç´¢</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch08q3" value="2" class="quiz-radio">
                        <span>è®­ç»ƒæ¨¡å‹</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch08-quiz-4">
                <div class="quiz-question">4. ä½•æ—¶åº”è¯¥é€‰æ‹©RAGè€Œä¸æ˜¯å¾®è°ƒï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch08q4" value="0" class="quiz-radio">
                        <span>éœ€è¦ç‰¹å®šæ ¼å¼æˆ–é£æ ¼</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch08q4" value="1" class="quiz-radio">
                        <span>æ•°æ®ç»å¸¸å˜åŒ–æˆ–æ•°æ®é‡å¾ˆå¤§</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch08q4" value="2" class="quiz-radio">
                        <span>éœ€è¦æ”¹å˜æ¨¡å‹çš„è¯´è¯æ–¹å¼</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>
        </div>

        <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
        <div style="text-align: center; margin-top: 40px; margin-bottom: 20px;">
            <a href="../index.html" class="back-btn" style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; background: var(--primary-color); color: white; text-decoration: none; border-radius: 8px; font-weight: 500;">
                <span>ğŸ </span>
                <span>è¿”å›è¯¾ç¨‹é¦–é¡µ</span>
            </a>
        </div>

        <!-- ç¤¾äº¤åˆ†äº« -->
        <div class="share-buttons">
            <a href="#" class="share-btn share-wechat" data-share-type="wechat">
                <span>ğŸ’¬</span>
                <span>åˆ†äº«åˆ°å¾®ä¿¡</span>
            </a>
            <a href="#" class="share-btn share-weibo" data-share-type="weibo">
                <span>ğŸ“±</span>
                <span>åˆ†äº«åˆ°å¾®åš</span>
            </a>
            <a href="#" class="share-btn share-copy" data-share-type="copy">
                <span>ğŸ”—</span>
                <span>å¤åˆ¶é“¾æ¥</span>
            </a>
        </div>
    </main>

    <script src="../js/main.js"></script>
    <script>
        // RAGæ¼”ç¤º
        document.getElementById('ragBtn').addEventListener('click', () => {
            const input = document.getElementById('ragInput').value;
            const result = document.getElementById('ragResult');

            // æ¨¡æ‹ŸRAGæµç¨‹
            result.innerHTML = `
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #2563eb;">
                        <strong>æ­¥éª¤1ï¼šå‘é‡åŒ–æŸ¥è¯¢</strong>
                        <p style="font-size: 0.9rem; margin-top: 8px; color: var(--text-secondary);">å°†é—®é¢˜"${input}"è½¬æ¢ä¸ºå‘é‡è¡¨ç¤º [0.23, -0.15, 0.67, ...]</p>
                    </div>
                    <div style="text-align: center; color: var(--primary-color);">â†“</div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #7c3aed;">
                        <strong>æ­¥éª¤2ï¼šç›¸ä¼¼åº¦æ£€ç´¢</strong>
                        <p style="font-size: 0.9rem; margin-top: 8px; color: var(--text-secondary);">åœ¨å‘é‡æ•°æ®åº“ä¸­æ‰¾åˆ°3ä¸ªæœ€ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µ</p>
                    </div>
                    <div style="text-align: center; color: var(--primary-color);">â†“</div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #06b6d4;">
                        <strong>æ­¥éª¤3ï¼šæ„å»ºå¢å¼ºæç¤º</strong>
                        <p style="font-size: 0.9rem; margin-top: 8px; color: var(--text-secondary);">å°†æ£€ç´¢åˆ°çš„å†…å®¹ä½œä¸ºä¸Šä¸‹æ–‡æ·»åŠ åˆ°æç¤ºè¯ä¸­</p>
                    </div>
                    <div style="text-align: center; color: var(--primary-color);">â†“</div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                        <strong>æ­¥éª¤4ï¼šLLMç”Ÿæˆå›ç­”</strong>
                        <p style="font-size: 0.9rem; margin-top: 8px; color: var(--text-secondary);">LLMåŸºäºå¢å¼ºçš„æç¤ºè¯ç”Ÿæˆå‡†ç¡®å›ç­”</p>
                    </div>
                </div>
            `;
        });

        // ç« èŠ‚æµ‹éªŒé€»è¾‘
        const ch08QuizAnswers = {
            'ch08-quiz-1': { correct: '1', explanation: 'æ­£ç¡®ï¼RAGçš„æ ¸å¿ƒä½œç”¨æ˜¯é€šè¿‡æ£€ç´¢å¤–éƒ¨æ–‡æ¡£å¢å¼ºLLMï¼Œä¸ºæ¨¡å‹æä¾›å‡†ç¡®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»è€Œç”Ÿæˆæ›´å¯é çš„å›ç­”ã€‚' },
            'ch08-quiz-2': { correct: '0', explanation: 'æ­£ç¡®ï¼RAGæ— éœ€é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œåªéœ€æ›´æ–°æ–‡æ¡£åº“å³å¯ï¼Œç‰¹åˆ«é€‚åˆæ•°æ®ç»å¸¸å˜åŒ–çš„åœºæ™¯ã€‚ç›¸æ¯”å¾®è°ƒï¼ŒRAGæ›´çµæ´»ã€æˆæœ¬æ›´ä½ã€‚' },
            'ch08-quiz-3': { correct: '1', explanation: 'æ­£ç¡®ï¼å‘é‡æ•°æ®åº“å­˜å‚¨æ–‡æ¡£çš„å‘é‡è¡¨ç¤ºï¼Œæ”¯æŒå¿«é€Ÿç›¸ä¼¼åº¦æ£€ç´¢ã€‚å½“ç”¨æˆ·æé—®æ—¶ï¼Œç³»ç»Ÿä¼šæŸ¥è¯¢å‘é‡æ•°æ®åº“ï¼Œæ‰¾åˆ°æœ€ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µã€‚' },
            'ch08-quiz-4': { correct: '1', explanation: 'æ­£ç¡®ï¼å½“æ•°æ®ç»å¸¸å˜åŒ–æˆ–æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œåº”è¯¥é€‰æ‹©RAGã€‚å¾®è°ƒæ›´é€‚åˆéœ€è¦ç‰¹å®šæ ¼å¼ã€é£æ ¼æˆ–è¯´è¯æ–¹å¼çš„åœºæ™¯ã€‚' }
        };

        document.querySelectorAll('.submit-quiz-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const container = btn.closest('.quiz-container');
                const selected = container.querySelector('.quiz-radio:checked');
                const feedback = container.querySelector('.quiz-feedback');
                const options = container.querySelectorAll('.quiz-option');

                if (!selected) {
                    alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆ');
                    return;
                }

                const quizId = container.getAttribute('data-quiz-id');
                const quiz = ch08QuizAnswers[quizId];

                feedback.classList.remove('correct', 'incorrect');
                feedback.classList.add('show');

                if (selected.value === quiz.correct) {
                    feedback.classList.add('correct');
                    feedback.innerHTML = `<strong>âœ“ å›ç­”æ­£ç¡®ï¼</strong><p>${quiz.explanation}</p>`;
                    options.forEach(opt => {
                        if (opt.querySelector('.quiz-radio').value === quiz.correct) {
                            opt.classList.add('correct');
                        }
                    });
                } else {
                    feedback.classList.add('incorrect');
                    feedback.innerHTML = `<strong>âœ— å›ç­”é”™è¯¯</strong><p>${quiz.explanation}</p>`;
                    options.forEach(opt => {
                        if (opt.querySelector('.quiz-radio').value === quiz.correct) {
                            opt.classList.add('correct');
                        } else if (opt.querySelector('.quiz-radio').checked) {
                            opt.classList.add('incorrect');
                        }
                    });
                }

                btn.disabled = true;
                btn.textContent = 'å·²å®Œæˆ';
            });
        });
    </script>
</body>
</html>
