<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·±å…¥äº†è§£ - åŠ¨æ‰‹å®è·µ</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header class="top-header">
        <div class="logo">
            <span class="logo-icon">ğŸ¤–</span>
            <span class="logo-text">ç”Ÿæˆå¼AIå…¥é—¨è¯¾ç¨‹</span>
        </div>
    </header>

    <main class="deep-page">
        <div class="deep-header">
            <a href="../index.html#ch06" class="back-btn">
                <span>â†</span>
                <span>è¿”å›è¯¾ç¨‹é¦–é¡µ</span>
            </a>
        </div>

        <h1 class="deep-title">æ·±å…¥äº†è§£ï¼šåŠ¨æ‰‹å®è·µ</h1>

        <div class="deep-content">
            <h2>ä»£ç è¿è¡Œæ¼”ç¤º</h2>
            <p>ä»¥ä¸‹æ˜¯è°ƒç”¨å¤§æ¨¡å‹APIçš„å®Œæ•´ç¤ºä¾‹ä»£ç ï¼š</p>

            <div class="code-demo">
                <div class="code-header">
                    <span class="code-title">å®Œæ•´çš„APIè°ƒç”¨ç¤ºä¾‹</span>
                    <button class="copy-btn" data-copy-target="code-full">å¤åˆ¶ä»£ç </button>
                </div>
                <pre class="code-block" id="code-full"><code><span class="code-comment"># å®‰è£…ä¾èµ–</span>
<span class="code-comment"># pip install openai</span>

<span class="code-keyword">from</span> openai <span class="code-keyword">import</span> OpenAI
<span class="code-keyword">import</span> os

<span class="code-comment"># ä»ç¯å¢ƒå˜é‡è¯»å–APIå¯†é’¥ï¼ˆæ›´å®‰å…¨ï¼‰</span>
api_key = os.<span class="code-function">getenv</span>(<span class="code-string">"DEEPSEEK_API_KEY"</span>)

<span class="code-comment"># åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
client = OpenAI(
    api_key=api_key,
    base_url=<span class="code-string">"https://api.deepseek.com"</span>
)

<span class="code-keyword">def</span> <span class="code-function">chat_with_ai</span>(message):
    <span class="code-string">"""å‘é€æ¶ˆæ¯å¹¶è·å–AIå›å¤"""</span>
    <span class="code-keyword">try</span>:
        response = client.chat.completions.<span class="code-function">create</span>(
            model=<span class="code-string">"deepseek-chat"</span>,
            messages=[
                {<span class="code-string">"role"</span>: <span class="code-string">"system"</span>, <span class="code-string">"content"</span>: <span class="code-string">"ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„AIåŠ©æ‰‹ã€‚"</span>},
                {<span class="code-string">"role"</span>: <span class="code-string">"user"</span>, <span class="code-string">"content"</span>: message}
            ],
            temperature=<span class="code-number">0.7</span>,
            max_tokens=<span class="code-number">500</span>
        )
        <span class="code-keyword">return</span> response.choices[<span class="code-number">0</span>].message.content
    <span class="code-keyword">except</span> Exception <span class="code-keyword">as</span> e:
        <span class="code-keyword">return</span> <span class="code-string">f"é”™è¯¯ï¼š{str(e)}"</span>

<span class="code-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="code-keyword">if</span> __name__ == <span class="code-string">"__main__"</span>:
    user_input = <span class="code-string">"è¯·ä»‹ç»ä¸€ä¸‹Pythonç¼–ç¨‹è¯­è¨€çš„ç‰¹ç‚¹"</span>
    <span class="code-function">print</span>(<span class="code-string">f"ç”¨æˆ·ï¼š{user_input}"</span>)
    <span class="code-function">print</span>(<span class="code-string">f"AIï¼š{chat_with_ai(user_input)}"</span>)</code></pre>
            </div>

            <h2>æ¨¡æ‹ŸAIå¯¹è¯</h2>
            <p>ä½“éªŒä¸å¤§æ¨¡å‹çš„å®æ—¶å¯¹è¯ï¼ˆæ¨¡æ‹Ÿæ¼”ç¤ºï¼‰ï¼š</p>

            <div class="chat-demo">
                <div class="chat-messages" id="chatMessages"></div>
                <div class="chat-input-row">
                    <input type="text" class="chat-input" id="chatInput" placeholder="è¾“å…¥ä½ çš„é—®é¢˜...">
                    <button class="send-btn" id="sendBtn">å‘é€</button>
                </div>
            </div>

            <h2>ä¸åŒè°ƒç”¨æ–¹å¼å¯¹æ¯”</h2>

            <table style="width:100%; border-collapse: collapse; margin: 20px 0;">
                <tr style="background: var(--bg-tertiary);">
                    <th style="padding: 12px; border: 1px solid var(--border-color);">ç‰¹æ€§</th>
                    <th style="padding: 12px; border: 1px solid var(--border-color);">SDK/APIè°ƒç”¨</th>
                    <th style="padding: 12px; border: 1px solid var(--border-color);">è‡ªç„¶è¯­è¨€å¯¹è¯</th>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">äº¤äº’æ–¹å¼</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">ä»£ç è°ƒç”¨</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">å¯¹è¯ç•Œé¢</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æŠ€æœ¯é—¨æ§›</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">éœ€è¦ç¼–ç¨‹çŸ¥è¯†</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">é›¶é—¨æ§›</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">çµæ´»æ€§</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">é«˜ï¼Œå¯ç²¾ç¡®æ§åˆ¶</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æœ‰é™</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">åº”ç”¨åœºæ™¯</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">åº”ç”¨å¼€å‘ã€æ‰¹é‡å¤„ç†</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æ—¥å¸¸é—®ç­”ã€ç®€å•ä»»åŠ¡</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æˆæœ¬</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">æŒ‰tokenè®¡è´¹</td>
                    <td style="padding: 12px; border: 1px solid var(--border-color);">é€šå¸¸å…è´¹</td>
                </tr>
            </table>

            <h2>æ¨èå­¦ä¹ è·¯å¾„</h2>

            <div style="background: var(--bg-tertiary); padding: 25px; border-radius: 10px; margin: 20px 0;">
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid var(--primary-color);">
                        <strong>ç¬¬1æ­¥ï¼š</strong> ç†Ÿæ‚‰PythonåŸºç¡€è¯­æ³•
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid var(--primary-color);">
                        <strong>ç¬¬2æ­¥ï¼š</strong> å°è¯•ä½¿ç”¨ç½‘é¡µç‰ˆå¯¹è¯ï¼Œç†è§£æç¤ºè¯å·¥ç¨‹
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid var(--primary-color);">
                        <strong>ç¬¬3æ­¥ï¼š</strong> ç”³è¯·APIå¯†é’¥ï¼Œè¿è¡Œç¬¬ä¸€ä¸ªç¤ºä¾‹
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid var(--primary-color);">
                        <strong>ç¬¬4æ­¥ï¼š</strong> å­¦ä¹ RAGã€Agentç­‰é«˜çº§æŠ€æœ¯
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid var(--success-color);">
                        <strong>ç¬¬5æ­¥ï¼š</strong> æ„å»ºè‡ªå·±çš„AIåº”ç”¨ï¼
                    </div>
                </div>
            </div>

            <h2>ç« èŠ‚æµ‹éªŒ</h2>

            <div class="quiz-container" data-quiz-id="ch06-quiz-1">
                <div class="quiz-question">1. è°ƒç”¨å¤§æ¨¡å‹APIéœ€è¦ä»€ä¹ˆï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch06q1" value="0" class="quiz-radio">
                        <span>åªéœ€è¦Pythonç¯å¢ƒ</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch06q1" value="1" class="quiz-radio">
                        <span>APIå¯†é’¥å’ŒSDKåº“</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch06q1" value="2" class="quiz-radio">
                        <span>ä»˜è´¹è®¢é˜…</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch06-quiz-2">
                <div class="quiz-question">2. SDK/APIè°ƒç”¨ç›¸æ¯”è‡ªç„¶è¯­è¨€å¯¹è¯çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch06q2" value="0" class="quiz-radio">
                        <span>æ“ä½œæ›´ç®€å•</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch06q2" value="1" class="quiz-radio">
                        <span>çµæ´»æ€§é«˜ï¼Œå¯ç²¾ç¡®æ§åˆ¶ï¼Œé€‚åˆåº”ç”¨å¼€å‘</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch06q2" value="2" class="quiz-radio">
                        <span>å®Œå…¨å…è´¹</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch06-quiz-3">
                <div class="quiz-question">3. å­¦ä¹ AIåº”ç”¨å¼€å‘çš„æ¨èè·¯å¾„æ˜¯ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch06q3" value="0" class="quiz-radio">
                        <span>ç›´æ¥å¼€å§‹æ„å»ºå¤æ‚åº”ç”¨</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch06q3" value="1" class="quiz-radio">
                        <span>PythonåŸºç¡€ â†’ æç¤ºè¯å·¥ç¨‹ â†’ APIè°ƒç”¨ â†’ é«˜çº§æŠ€æœ¯</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch06q3" value="2" class="quiz-radio">
                        <span>è·³è¿‡åŸºç¡€ç›´æ¥å­¦RAGå’ŒAgent</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch06-quiz-4">
                <div class="quiz-question">4. temperatureå‚æ•°æ§åˆ¶ä»€ä¹ˆï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch06q4" value="0" class="quiz-radio">
                        <span>APIè°ƒç”¨é€Ÿåº¦</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch06q4" value="1" class="quiz-radio">
                        <span>è¾“å‡ºçš„éšæœºæ€§å’Œå¤šæ ·æ€§</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch06q4" value="2" class="quiz-radio">
                        <span>tokenæ•°é‡é™åˆ¶</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>
        </div>

        <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
        <div style="text-align: center; margin-top: 40px; margin-bottom: 20px;">
            <a href="../index.html" class="back-btn" style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; background: var(--primary-color); color: white; text-decoration: none; border-radius: 8px; font-weight: 500;">
                <span>ğŸ </span>
                <span>è¿”å›è¯¾ç¨‹é¦–é¡µ</span>
            </a>
        </div>

        <!-- ç¤¾äº¤åˆ†äº« -->
        <div class="share-buttons">
            <a href="#" class="share-btn share-wechat" data-share-type="wechat">
                <span>ğŸ’¬</span>
                <span>åˆ†äº«åˆ°å¾®ä¿¡</span>
            </a>
            <a href="#" class="share-btn share-weibo" data-share-type="weibo">
                <span>ğŸ“±</span>
                <span>åˆ†äº«åˆ°å¾®åš</span>
            </a>
            <a href="#" class="share-btn share-copy" data-share-type="copy">
                <span>ğŸ”—</span>
                <span>å¤åˆ¶é“¾æ¥</span>
            </a>
        </div>
    </main>

    <script src="../js/main.js"></script>
    <script>
        // èŠå¤©æ¼”ç¤º
        const messages = document.getElementById('chatMessages');
        const input = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');

        const responses = {
            greeting: ['ä½ å¥½ï¼æˆ‘æ˜¯AIåŠ©æ‰‹ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ', 'å—¨ï¼å¾ˆé«˜å…´è§åˆ°ä½ ã€‚è¯·é—®æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ'],
            weather: ['åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¤©æ°”æŸ¥è¯¢ä¼šé€šè¿‡Function Callingè°ƒç”¨å®æ—¶å¤©æ°”APIã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå®ç”¨çš„åŠŸèƒ½ï¼'],
            code: ['ç¼–ç¨‹æ˜¯AIçš„å¼ºé¡¹ä¹‹ä¸€ã€‚ä½ å¯ä»¥è®©AIå¸®ä½ å†™ä»£ç ã€è§£é‡Šä»£ç ã€è°ƒè¯•Bugç­‰ã€‚'],
            default: ['è¿™æ˜¯ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼åœ¨å®é™…å¼€å‘ä¸­ï¼Œä½ ä¼šå­¦åˆ°æ›´å¤šå…³äºAPIè°ƒç”¨çš„çŸ¥è¯†ã€‚', 'æ„Ÿè°¢ä½ çš„æé—®ï¼å»ºè®®ä½ å°è¯•è‡ªå·±åŠ¨æ‰‹è¿è¡Œç¤ºä¾‹ä»£ç ï¼Œä¼šå­¦åˆ°æ›´å¤šã€‚']
        };

        function addMessage(type, content) {
            const msgDiv = document.createElement('div');
            msgDiv.className = `chat-message ${type}`;

            const avatar = document.createElement('div');
            avatar.className = 'chat-avatar';
            avatar.textContent = type === 'ai' ? 'ğŸ¤–' : 'ğŸ‘¤';

            const bubble = document.createElement('div');
            bubble.className = 'chat-bubble';
            bubble.textContent = content;

            msgDiv.appendChild(avatar);
            msgDiv.appendChild(bubble);
            messages.appendChild(msgDiv);
            messages.scrollTop = messages.scrollHeight;
        }

        function getResponse(msg) {
            const lower = msg.toLowerCase();
            if (lower.includes('ä½ å¥½') || lower.includes('hi')) {
                return responses.greeting[Math.floor(Math.random() * responses.greeting.length)];
            }
            if (lower.includes('å¤©æ°”')) {
                return responses.weather[0];
            }
            if (lower.includes('ä»£ç ') || lower.includes('ç¼–ç¨‹')) {
                return responses.code[0];
            }
            return responses.default[Math.floor(Math.random() * responses.default.length)];
        }

        function send() {
            const msg = input.value.trim();
            if (!msg) return;

            addMessage('user', msg);
            input.value = '';

            setTimeout(() => {
                addMessage('ai', getResponse(msg));
            }, 600);
        }

        sendBtn.addEventListener('click', send);
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') send();
        });

        // åˆå§‹æ¶ˆæ¯
        setTimeout(() => {
            addMessage('ai', 'ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIå­¦ä¹ åŠ©æ‰‹ã€‚ä½ å¯ä»¥é—®æˆ‘å…³äºAPIè°ƒç”¨ã€ç¼–ç¨‹å­¦ä¹ ç­‰æ–¹é¢çš„é—®é¢˜ã€‚');
        }, 500);

        // ç« èŠ‚æµ‹éªŒé€»è¾‘
        const ch06QuizAnswers = {
            'ch06-quiz-1': { correct: '1', explanation: 'æ­£ç¡®ï¼è°ƒç”¨å¤§æ¨¡å‹APIéœ€è¦APIå¯†é’¥å’Œç›¸åº”çš„SDKåº“ï¼ˆå¦‚OpenAI Pythonåº“ï¼‰ã€‚APIå¯†é’¥ç”¨äºèº«ä»½éªŒè¯ï¼ŒSDKåº“ç®€åŒ–äº†è°ƒç”¨è¿‡ç¨‹ã€‚' },
            'ch06-quiz-2': { correct: '1', explanation: 'æ­£ç¡®ï¼SDK/APIè°ƒç”¨çµæ´»æ€§é«˜ï¼Œå¯ç²¾ç¡®æ§åˆ¶å‚æ•°ï¼Œé€‚åˆåº”ç”¨å¼€å‘å’Œæ‰¹é‡å¤„ç†ã€‚è™½ç„¶éœ€è¦ç¼–ç¨‹çŸ¥è¯†ï¼Œä½†èƒ½å®ç°æ›´å¤æ‚çš„åŠŸèƒ½ã€‚' },
            'ch06-quiz-3': { correct: '1', explanation: 'æ­£ç¡®ï¼æ¨èçš„å­¦ä¹ è·¯å¾„æ˜¯ï¼šPythonåŸºç¡€ â†’ æç¤ºè¯å·¥ç¨‹ â†’ APIè°ƒç”¨ â†’ RAGã€Agentç­‰é«˜çº§æŠ€æœ¯ã€‚å¾ªåºæ¸è¿›æ˜¯æœ€é«˜æ•ˆçš„å­¦ä¹ æ–¹å¼ã€‚' },
            'ch06-quiz-4': { correct: '1', explanation: 'æ­£ç¡®ï¼temperatureå‚æ•°æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§å’Œå¤šæ ·æ€§ã€‚å€¼è¶Šé«˜è¶Šéšæœºåˆ›æ„ï¼Œå€¼è¶Šä½è¶Šç¡®å®šä¿å®ˆã€‚' }
        };

        document.querySelectorAll('.submit-quiz-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const container = btn.closest('.quiz-container');
                const selected = container.querySelector('.quiz-radio:checked');
                const feedback = container.querySelector('.quiz-feedback');
                const options = container.querySelectorAll('.quiz-option');

                if (!selected) {
                    alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆ');
                    return;
                }

                const quizId = container.getAttribute('data-quiz-id');
                const quiz = ch06QuizAnswers[quizId];

                feedback.classList.remove('correct', 'incorrect');
                feedback.classList.add('show');

                if (selected.value === quiz.correct) {
                    feedback.classList.add('correct');
                    feedback.innerHTML = `<strong>âœ“ å›ç­”æ­£ç¡®ï¼</strong><p>${quiz.explanation}</p>`;
                    options.forEach(opt => {
                        if (opt.querySelector('.quiz-radio').value === quiz.correct) {
                            opt.classList.add('correct');
                        }
                    });
                } else {
                    feedback.classList.add('incorrect');
                    feedback.innerHTML = `<strong>âœ— å›ç­”é”™è¯¯</strong><p>${quiz.explanation}</p>`;
                    options.forEach(opt => {
                        if (opt.querySelector('.quiz-radio').value === quiz.correct) {
                            opt.classList.add('correct');
                        } else if (opt.querySelector('.quiz-radio').checked) {
                            opt.classList.add('incorrect');
                        }
                    });
                }

                btn.disabled = true;
                btn.textContent = 'å·²å®Œæˆ';
            });
        });
    </script>
</body>
</html>
