<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·±å…¥äº†è§£ - AIæ™ºèƒ½ä½“</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header class="top-header">
        <div class="logo">
            <span class="logo-icon">ğŸ¤–</span>
            <span class="logo-text">ç”Ÿæˆå¼AIå…¥é—¨è¯¾ç¨‹</span>
        </div>
    </header>

    <main class="deep-page">
        <div class="deep-header">
            <a href="../index.html#ch09" class="back-btn">
                <span>â†</span>
                <span>è¿”å›è¯¾ç¨‹é¦–é¡µ</span>
            </a>
        </div>

        <h1 class="deep-title">æ·±å…¥äº†è§£ï¼šAIæ™ºèƒ½ä½“</h1>

        <div class="deep-content">
            <h2>Agentå·¥ä½œæµå¯è§†åŒ–</h2>
            <p>è§‚çœ‹AIæ™ºèƒ½ä½“å¦‚ä½•æ‰§è¡Œä»»åŠ¡ï¼š</p>

            <div style="background: var(--bg-tertiary); padding: 25px; border-radius: 10px; margin: 20px 0;">
                <div class="form-group">
                    <label class="form-label">è¾“å…¥ä»»åŠ¡</label>
                    <input id="agentInput" class="form-input" type="text" placeholder="ä¾‹å¦‚ï¼šå¸®æˆ‘é¢„å®šæ˜å¤©é£åŒ—äº¬çš„æœºç¥¨" value="å¸®æˆ‘é¢„å®šæ˜å¤©é£åŒ—äº¬çš„æœºç¥¨" readonly>
                </div>
                <button id="agentBtn" class="btn-generate">ğŸ¤– æ‰§è¡ŒAgent</button>
                <div id="agentResult" style="margin-top: 20px;"></div>
            </div>

            <h2>Agentç»„ä»¶è¯¦è§£</h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin: 20px 0;">
                <div style="background: white; padding: 20px; border-radius: 10px;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ‘ï¸</div>
                    <h3 style="color: var(--primary-color);">æ„ŸçŸ¥</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">æ¥æ”¶å’Œç†è§£å¤–éƒ¨ä¿¡æ¯</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ§ </div>
                    <h3 style="color: var(--secondary-color);">è§„åˆ’</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">åˆ†è§£ä»»åŠ¡ï¼Œåˆ¶å®šè®¡åˆ’</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ’¾</div>
                    <h3 style="color: var(--accent-color);">è®°å¿†</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">å­˜å‚¨å’Œæ£€ç´¢ä¿¡æ¯</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ”§</div>
                    <h3 style="color: var(--success-color);">å·¥å…·</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">è°ƒç”¨å¤–éƒ¨å·¥å…·å’ŒAPI</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">âš¡</div>
                    <h3 style="color: var(--warning-color);">è¡ŒåŠ¨</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">æ‰§è¡Œå…·ä½“æ“ä½œ</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ”„</div>
                    <h3 style="color: #ef4444;">åæ€</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">è¯„ä¼°å¹¶è°ƒæ•´ç­–ç•¥</p>
                </div>
            </div>

            <h2>Agentä»£ç ç¤ºä¾‹ï¼ˆLangChainï¼‰</h2>

            <div class="code-demo">
                <div class="code-header">
                    <span class="code-title">ç®€å•Agentå®ç°</span>
                    <button class="copy-btn" data-copy-target="code-agent">å¤åˆ¶ä»£ç </button>
                </div>
                <pre class="code-block" id="code-agent"><code><span class="code-keyword">from</span> langchain.agents <span class="code-keyword">import</span> initialize_agent, Tool, AgentType
<span class="code-keyword">from</span> langchain.tools <span class="code-keyword">import</span> DuckDuckGoSearchRun
<span class="code-keyword">from</span> langchain.chat_models <span class="code-keyword">import</span> ChatOpenAI

<span class="code-comment"># åˆå§‹åŒ–LLM</span>
llm = ChatOpenAI(model=<span class="code-string">"gpt-3.5-turbo"</span>)

<span class="code-comment"># å®šä¹‰å·¥å…·</span>
search = DuckDuckGoSearchRun()
tools = [
    Tool(
        name=<span class="code-string">"Search"</span>,
        func=search.<span class="code-function">run</span>,
        description=<span class="code-string">"ç”¨äºæœç´¢æœ€æ–°ä¿¡æ¯"</span>
    )
]

<span class="code-comment"># åˆ›å»ºAgent</span>
agent = <span class="code-function">initialize_agent</span>(
    tools=tools,
    llm=llm,
    agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION,
    verbose=<span class="code-keyword">True</span>
)

<span class="code-comment"># æ‰§è¡Œä»»åŠ¡</span>
task = <span class="code-string">"æœç´¢æœ€æ–°çš„AIæ–°é—»"</span>
result = agent.<span class="code-function">run</span>(task)
<span class="code-function">print</span>(result)</code></pre>
            </div>

            <h2>ç« èŠ‚æµ‹éªŒ</h2>

            <div class="quiz-container" data-quiz-id="ch09-quiz-1">
                <div class="quiz-question">1. AIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰çš„æ ¸å¿ƒç‰¹å¾æ˜¯ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch09q1" value="0" class="quiz-radio">
                        <span>åªèƒ½å›ç­”é—®é¢˜</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch09q1" value="1" class="quiz-radio">
                        <span>èƒ½å¤Ÿæ„ŸçŸ¥ã€è§„åˆ’ã€è¡ŒåŠ¨ã€åæ€çš„è‡ªä¸»ç³»ç»Ÿ</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch09q1" value="2" class="quiz-radio">
                        <span>éœ€è¦äººå·¥æŒç»­å¹²é¢„</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch09-quiz-2">
                <div class="quiz-question">2. ReActæ¨¡å¼ä¸­çš„å¾ªç¯æ˜¯æŒ‡ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch09q2" value="0" class="quiz-radio">
                        <span>é‡å¤ç›¸åŒåŠ¨ä½œ</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch09q2" value="1" class="quiz-radio">
                        <span>æ€è€ƒ â†’ è¡ŒåŠ¨ â†’ è§‚å¯Ÿçš„å¾ªç¯è¿­ä»£</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch09q2" value="2" class="quiz-radio">
                        <span>é‡æ–°å¼€å§‹ä»»åŠ¡</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch09-quiz-3">
                <div class="quiz-question">3. Agentçš„"å·¥å…·"ï¼ˆToolsï¼‰ç»„ä»¶çš„ä½œç”¨æ˜¯ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch09q3" value="0" class="quiz-radio">
                        <span>å­˜å‚¨ä¿¡æ¯</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch09q3" value="1" class="quiz-radio">
                        <span>è°ƒç”¨å¤–éƒ¨APIå’ŒæœåŠ¡ï¼Œæ‰©å±•Agentèƒ½åŠ›</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch09q3" value="2" class="quiz-radio">
                        <span>ç”Ÿæˆæ–‡æœ¬</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-container" data-quiz-id="ch09-quiz-4">
                <div class="quiz-question">4. Agentä¸ä¼ ç»ŸLLMå¯¹è¯çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Ÿ</div>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="ch09q4" value="0" class="quiz-radio">
                        <span>æ²¡æœ‰åŒºåˆ«</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch09q4" value="1" class="quiz-radio">
                        <span>Agentèƒ½ä¸»åŠ¨è§„åˆ’å’Œæ‰§è¡Œå¤šæ­¥éª¤ä»»åŠ¡</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="ch09q4" value="2" class="quiz-radio">
                        <span>ä¼ ç»ŸLLMæ›´æ™ºèƒ½</span>
                    </label>
                </div>
                <button class="submit-quiz-btn">æäº¤ç­”æ¡ˆ</button>
                <div class="quiz-feedback"></div>
            </div>
        </div>

        <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
        <div style="text-align: center; margin-top: 40px; margin-bottom: 20px;">
            <a href="../index.html#ch09" class="back-btn" style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; background: var(--primary-color); color: white; text-decoration: none; border-radius: 8px; font-weight: 500;">
                <span>ğŸ </span>
                <span>è¿”å›è¯¾ç¨‹é¦–é¡µ</span>
            </a>
        </div>
    </main>

    <script src="../js/main.js"></script>
    <script>
        // Agentæ¼”ç¤º
        let step = 0;
        const steps = [
            { thought: 'ç†è§£ç”¨æˆ·æ„å›¾ï¼šç”¨æˆ·éœ€è¦é¢„å®šæ˜å¤©é£åŒ—äº¬çš„æœºç¥¨', action: 'åˆ†è§£ä»»åŠ¡ï¼š1.æŸ¥è¯¢èˆªç­ 2.æ¯”è¾ƒä»·æ ¼ 3.é¢„è®¢æœºç¥¨', type: 'plan' },
            { thought: 'æå–å…³é”®ä¿¡æ¯ï¼šç›®çš„åœ°=åŒ—äº¬ï¼Œæ—¥æœŸ=æ˜å¤©', action: 'é€‰æ‹©å·¥å…·ï¼šèˆªç­æŸ¥è¯¢API', type: 'tool' },
            { thought: 'è°ƒç”¨èˆªç­APIæŸ¥è¯¢æ˜å¤©åˆ°åŒ—äº¬çš„èˆªç­', action: 'æ‰§è¡Œï¼šsearch_flights("åŒ—äº¬", "æ˜å¤©")', type: 'action' },
            { thought: 'è·å¾—APIå“åº”ï¼šæ‰¾åˆ°5ä¸ªèˆªç­é€‰é¡¹', action: 'ç»“æœï¼šCA1234 08:00èµ·é£ Â¥680, MU5678 10:30èµ·é£ Â¥520...', type: 'observe' },
            { thought: 'åˆ†æå¹¶é€‰æ‹©æœ€ä¼˜é€‰é¡¹', action: 'æ¨èï¼šMU5678èˆªç­æ€§ä»·æ¯”æœ€é«˜ï¼Œè¯¢é—®æ˜¯å¦é¢„è®¢', type: 'plan' },
            { thought: 'ä»»åŠ¡å®Œæˆ', action: 'ç”Ÿæˆæœ€ç»ˆå›ç­”', type: 'finish' }
        ];

        document.getElementById('agentBtn').addEventListener('click', () => {
            const input = document.getElementById('agentInput').value;
            const result = document.getElementById('agentResult');
            step = 0;

            result.innerHTML = '<div style="text-align: center; padding: 20px;"><strong>ğŸ¤– Agentå¼€å§‹æ‰§è¡Œä»»åŠ¡...</strong></div>';

            function showNextStep() {
                if (step >= steps.length) {
                    result.innerHTML += `
                        <div style="background: #dcfce7; padding: 20px; border-radius: 8px; margin-top: 15px; border-left: 4px solid #10b981;">
                            <strong>âœ… ä»»åŠ¡å®Œæˆï¼</strong>
                            <p style="margin-top: 10px;">æœ€ç»ˆå›ç­”ï¼šæˆ‘å·²ä¸ºæ‚¨æŸ¥è¯¢åˆ°æ˜å¤©é£åŒ—äº¬çš„èˆªç­ï¼Œæ¨èMU5678ï¼ˆ10:30èµ·é£ï¼ŒÂ¥520ï¼‰ï¼Œæ€§ä»·æ¯”æœ€é«˜ã€‚éœ€è¦æˆ‘å¸®æ‚¨é¢„è®¢å—ï¼Ÿ</p>
                        </div>
                    `;
                    return;
                }

                const s = steps[step];
                const colors = {
                    plan: '#2563eb',
                    tool: '#7c3aed',
                    action: '#06b6d4',
                    observe: '#10b981',
                    finish: '#f59e0b'
                };

                result.innerHTML += `
                    <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 4px solid ${colors[s.type]};">
                        <div style="color: ${colors[s.type]}; font-weight: 600; margin-bottom: 5px;">ğŸ¤” æ€è€ƒ ${step + 1}</div>
                        <p style="font-size: 0.95rem;">${s.thought}</p>
                        <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border-color);">
                            <strong>è¡ŒåŠ¨ï¼š</strong>${s.action}
                        </div>
                    </div>
                `;

                step++;
                setTimeout(showNextStep, 1500);
            }

            showNextStep();
        });

        // ç« èŠ‚æµ‹éªŒé€»è¾‘
        const ch09QuizAnswers = {
            'ch09-quiz-1': { correct: '1', explanation: 'æ­£ç¡®ï¼AIæ™ºèƒ½ä½“æ˜¯èƒ½å¤Ÿæ„ŸçŸ¥ã€è§„åˆ’ã€è¡ŒåŠ¨ã€åæ€çš„è‡ªä¸»ç³»ç»Ÿã€‚å®ƒä¸ä»…èƒ½å›ç­”é—®é¢˜ï¼Œè¿˜èƒ½ä¸»åŠ¨åˆ†è§£ä»»åŠ¡ã€è°ƒç”¨å·¥å…·ã€æ‰§è¡Œå¤šæ­¥éª¤æ“ä½œã€‚' },
            'ch09-quiz-2': { correct: '1', explanation: 'æ­£ç¡®ï¼ReActæ¨¡å¼æ˜¯æŒ‡æ¨ç†-è¡ŒåŠ¨å¾ªç¯ï¼šAgentå…ˆæ€è€ƒï¼ˆThoughtï¼‰ï¼Œå†è¡ŒåŠ¨ï¼ˆActionï¼‰ï¼Œç„¶åè§‚å¯Ÿç»“æœï¼ˆObservationï¼‰ï¼Œå¦‚æ­¤å¾ªç¯ç›´åˆ°ä»»åŠ¡å®Œæˆã€‚' },
            'ch09-quiz-3': { correct: '1', explanation: 'æ­£ç¡®ï¼Agentçš„å·¥å…·ç»„ä»¶ç”¨äºè°ƒç”¨å¤–éƒ¨APIå’ŒæœåŠ¡ï¼Œå¦‚æœç´¢å¼•æ“ã€å¤©æ°”APIã€æ•°æ®åº“ç­‰ï¼Œä»¥æ­¤æ‰©å±•Agentçš„èƒ½åŠ›è¾¹ç•Œã€‚' },
            'ch09-quiz-4': { correct: '1', explanation: 'æ­£ç¡®ï¼Agentèƒ½ä¸»åŠ¨è§„åˆ’å’Œæ‰§è¡Œå¤šæ­¥éª¤ä»»åŠ¡ï¼Œè€Œä¼ ç»ŸLLMåªæ˜¯è¢«åŠ¨å“åº”å½“å‰å¯¹è¯ã€‚Agentå…·å¤‡æ›´å¼ºçš„è‡ªä¸»æ€§å’Œä»»åŠ¡æ‰§è¡Œèƒ½åŠ›ã€‚' }
        };

        document.querySelectorAll('.submit-quiz-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const container = btn.closest('.quiz-container');
                const selected = container.querySelector('.quiz-radio:checked');
                const feedback = container.querySelector('.quiz-feedback');
                const options = container.querySelectorAll('.quiz-option');

                if (!selected) {
                    alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆ');
                    return;
                }

                const quizId = container.getAttribute('data-quiz-id');
                const quiz = ch09QuizAnswers[quizId];

                feedback.classList.remove('correct', 'incorrect');
                feedback.classList.add('show');

                if (selected.value === quiz.correct) {
                    feedback.classList.add('correct');
                    feedback.innerHTML = `<strong>âœ“ å›ç­”æ­£ç¡®ï¼</strong><p>${quiz.explanation}</p>`;
                    options.forEach(opt => {
                        if (opt.querySelector('.quiz-radio').value === quiz.correct) {
                            opt.classList.add('correct');
                        }
                    });
                } else {
                    feedback.classList.add('incorrect');
                    feedback.innerHTML = `<strong>âœ— å›ç­”é”™è¯¯</strong><p>${quiz.explanation}</p>`;
                    options.forEach(opt => {
                        if (opt.querySelector('.quiz-radio').value === quiz.correct) {
                            opt.classList.add('correct');
                        } else if (opt.querySelector('.quiz-radio').checked) {
                            opt.classList.add('incorrect');
                        }
                    });
                }

                btn.disabled = true;
                btn.textContent = 'å·²å®Œæˆ';
            });
        });
    </script>
</body>
</html>
